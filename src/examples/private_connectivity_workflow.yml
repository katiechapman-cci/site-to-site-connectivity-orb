description: >
  Example workflow demonstrating how to use the circle private connectivity orb to access private repositories via circleci tunnel.

usage:
  version: 2.1

  orbs:
    circle-private-connectivity: your-namespace/circle-private-connectivity@0.0.1

  jobs:
    build-with-private-repo:
      docker:
        - image: cimg/base:current
      steps:
        - circle-private-connectivity/setup
        - circle-private-connectivity/checkout:
            git-url: << pipeline.parameters.git-url >>
        - run:
            name: Build application
            command: |
              # Your build commands here
              echo "Building application..."
        - circle-private-connectivity/cleanup

  workflows:
    private-repo-workflow:
      jobs:
        - build-with-private-repo:
            context:
              - ngrok-credentials
